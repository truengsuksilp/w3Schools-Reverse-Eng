<!DOCTYPE html>
<html lang="en">
    
  <%- include('../partials/_head.ejs', { 
    page: `ReVamp(ire)`, 
    cssFile: '/styles/src/exercise.css'
  }) %>
  <%- include('../partials/_head_js.ejs', { 
    jsFile: '/scripts/main.js'}) %>

<body>
  <!-- Aside Bar: To be replaced by Accordion later -->
  <container class="aside">

  <main>
    <aside class="menu">
      <!-- Header: Icons, Completion Tracker -->
      <section class="aside-header">
        <a href="/">
          <i class="fas fa-home"></i>
        </a>
        <a href="/exercises/<%= allExercises[0].language %>/reset">
          <i class="fas fa-redo-alt"></i>
        </a>
        <a>
          <i class="fas fa-times"></i>
        </a>
      </section>
      <section class="aside-tracker">
        <h5>
          Completed 
          <% if (!progress) { %>
            <%= question.order -1 %> 
          <% } else { %>
            <%= progress %>
          <% } %>
          of 10 Exercises
        </h5>
      </section>

      <!-- Loop through all Topics -->
      <% for (i in allExercises) { %>
        <p 
          class="menu-label topic_<%= i %>" 
          id="menuLabel"
        >
          <%= allExercises[i].topic %>
        </p>

        <!-- All questions: Cannot update the link to root -->
        <ul class="menu-list ">
          <% for (j in allQuestions) { %>
            <li 
              class="topic_<%= i %>"
            >
              <a 
                href= "../<%= allQuestions[i][j]._id %>/<%= allQuestions[i][j].order %>"
              >
                Exercise <%= allQuestions[i][j].topic_order%>
              </a>
            </li>
          <% } %>
        </ul>
      <% } %>
    </aside>
  </container> 
  <main>
   
    <!-- Header -->

    <!-- Show Burger when sidebar is hidden -->
    <nav class="navbar exercise-navbar">
      <i class="fas fa-bars exercise-navbar"></i>
    </nav>
    

    <!-- Exercise Card -->

    <section class='card'>

      <article class='card-content'>

        <div class="card-top">
          <h2 class='card-title'>Exercise</h2>
          <p class='card-desc'><%= question.prompt %></p>
        </div>

        <!-- FORM -->
        <div class="card-body">

          <form 
            action = <%= url %>
            method='POST'>

            <!-- CODE INPUT -->
            <div class="field card-mid">
              <div class="control"id="control-input">
                <p>
                  <%= question.text_before_inputs %>
                </p>
                <input 
                  type="text" 
                  class="input"
                  name="user_answer_1"
                  id="input1"
                >
                <p>
                  <%= question.text_between_inputs %>
                </p>
                <input 
                  type="text" 
                  class="input"
                  name="user_answer_2"
                  id='input2'
                >
                <p>
                  <%= question.text_after_inputs %>
                </p>
              </div>
              <p class='feedback'></p>
            </div>   

            <!-- BUTTONS -->
            
          </form>   
          <div class="control columns"id="card-buttons">
            <div class="submit card-buttons column">
                <button class="card-buttons button" id='submitButton'>Submit</button>
            </div>
            <div class="show-hide-answer card-buttons column">
              <button class="card-buttons button" id='showAnswerButton'>Show Answer</button>
              <button class="card-buttons button invisible" id='hideAnswerButton'>Hide Answer</button>
            </div>
          </div>

      </article>
    </section>
  </main>

<<<<<<< HEAD
  <footer class="footer is-invisible">
    <button class="button is-secondary" id='checkAnswer'>Check Answer</button>
=======
  <footer>
>>>>>>> main
    <p id='correctAnswer1'> <%= question.correct_answer_1 %> </p>
    <p id='correctAnswer2'> <%= question.correct_answer_2 %> </p>
  </footer>
    
</body>
</html>